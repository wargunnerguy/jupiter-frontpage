import{b as Q,f as q,g as Y}from"./chunk-TTX6MOR3.js";import{$ as w,$a as c,Cb as K,Ea as m,Ia as k,Ob as G,Pb as C,Q as D,Sa as B,Ta as b,Ua as O,Ub as W,Va as F,Wa as f,Xa as h,Ya as s,Za as a,_ as u,_a as o,aa as E,cb as M,db as p,eb as d,ha as V,hb as j,ib as N,ja as H,jb as U,kb as y,mb as _,nb as A,sa as L,sb as T,ta as R,ua as l,ub as I,ya as g,zb as $}from"./chunk-SWOVCPIE.js";var P=class n{STORAGE_KEY="jupiter:favorites";favSet=V(this.loadFromStorage());favorites=this.favSet;constructor(){$(()=>{let t=Array.from(this.favSet());localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))})}loadFromStorage(){try{let t=localStorage.getItem(this.STORAGE_KEY);return t?new Set(JSON.parse(t)):new Set}catch{return new Set}}isFav(t){return this.favSet().has(t)}toggle(t){let e=new Set(this.favSet());e.has(t)?e.delete(t):e.add(t),this.favSet.set(e)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"})};function et(n,t){n&1&&(E(),a(0,"svg",5),c(1,"path",7),o())}function nt(n,t){n&1&&(E(),a(0,"svg",6),c(1,"path",8),o())}var S=class n{constructor(t){this.favSvc=t}item;index=0;priority=!1;loaded=!1;loading;getSrcset(){let t=this.item.verticalPhotos?.[0]?.photoTypes||{};return Object.values(t).map(e=>`${e.url} ${e.w}w`).join(", ")}getImageUrl(){return this.item.verticalPhotos?.[0]?.photoUrlOriginal||""}getVideoUrl(){return this.item.canonicalUrl||""}onImgLoad(t){t.target.classList.add("loaded")}onToggleFav(){this.favSvc.toggle(this.item.id)}static \u0275fac=function(e){return new(e||n)(g(P))};static \u0275cmp=m({type:n,selectors:[["app-video-card"]],inputs:{item:"item",index:"index",priority:"priority",loading:"loading"},decls:7,vars:11,consts:[[1,"video-card","position-relative"],[1,"video-card-link",3,"href"],[1,"img-wrapper"],["decoding","async","fill","",1,"fill-img","rounded",3,"load","ngSrc","srcset","priority","alt"],["aria-label","Toggle favourite",1,"fav-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 16 16",1,"bi","bi-heart-fill"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 16 16",1,"bi","bi-heart"],["fill-rule","evenodd","d","M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"],["d",`m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989
          6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8
          15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15`]],template:function(e,r){e&1&&(a(0,"article",0)(1,"a",1)(2,"div",2)(3,"img",3),p("load",function(v){return r.onImgLoad(v)}),o()()(),a(4,"button",4),p("click",function(){return r.onToggleFav()}),b(5,et,2,0,":svg:svg",5)(6,nt,2,0,":svg:svg",6),o()()),e&2&&(l(),s("href",r.getVideoUrl(),L),l(2),s("ngSrc",T(r.getImageUrl()))("alt",T(r.item.heading||r.item.title))("srcset",r.getSrcset())("priority",r.priority),B("loading",r.priority?null:"lazy"),l(),y("active",r.favSvc.isFav(r.item.id)),l(),O(r.favSvc.isFav(r.item.id)?5:6))},dependencies:[C,W],styles:["[_nghost-%COMP%]{display:block;width:100%;transition:transform .2s ease,box-shadow .2s ease;will-change:transform}[_nghost-%COMP%]:hover{animation:_ngcontent-%COMP%_jiggle .3s ease-in-out;transform:scale(.96);box-shadow:0 0 10px #ffffffb3;z-index:3}.video-card-link[_ngcontent-%COMP%]{text-decoration:none;display:block;color:inherit}.img-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:2/3;overflow:hidden}.fill-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .6s ease-in}.fill-img.loaded[_ngcontent-%COMP%]{opacity:1}.video-card[_ngcontent-%COMP%]{position:relative}.video-card[_ngcontent-%COMP%]   .fav-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:transparent;border:none;padding:4px;cursor:pointer;fill:var(--favourite-icon-color);opacity:0;transform:scale(1);transition:opacity .2s,transform .2s;pointer-events:none}.video-card[_ngcontent-%COMP%]   .fav-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem;outline-width:2px}.video-card[_ngcontent-%COMP%]   .fav-btn.active[_ngcontent-%COMP%]{opacity:1!important;transform:scale(1.2);pointer-events:auto}.video-card[_ngcontent-%COMP%]:hover   .fav-btn[_ngcontent-%COMP%]:not(.active){opacity:.6;pointer-events:auto}@keyframes _ngcontent-%COMP%_jiggle{0%{transform:scale(1) rotate(0)}12%{transform:scale(.98) rotate(.15deg)}25%{transform:scale(.96) rotate(.4deg)}50%{transform:scale(.96) rotate(0)}62%{transform:scale(.96) rotate(-.15deg)}75%{transform:scale(.96) rotate(-.4deg)}to{transform:scale(.96) rotate(0)}}"]})};var rt=["scrollContainer"],it=(n,t)=>t.id;function ot(n,t){if(n&1){let e=M();a(0,"button",9),p("click",function(){u(e);let i=d();return w(i.scrollLeft())}),_(1,"\u2039"),o()}}function at(n,t){if(n&1&&(a(0,"div",7),c(1,"app-video-card",10),o()),n&2){let e=t.$implicit,r=t.$index,i=d();l(),s("item",e)("loading",i.loading)("priority",i.isFirstStrip&&r===0)}}function lt(n,t){if(n&1){let e=M();a(0,"button",11),p("click",function(){u(e);let i=d();return w(i.scrollRight())}),_(1,"\u203A"),o()}}var x=class n{constructor(t){this.cdr=t}title="";headerUrl="";items=[];loading=!0;isFirstStrip=!1;scrollContainer;showLeft=!1;showRight=!1;scrollEl;scrollListener=()=>this.updateScrollButtons();ngAfterViewInit(){this.scrollEl=this.scrollContainer.nativeElement,this.scrollEl.addEventListener("scroll",this.scrollListener),setTimeout(()=>{this.updateScrollButtons(),this.cdr.detectChanges()})}ngOnChanges(t){t.items&&setTimeout(()=>{this.updateScrollButtons(),this.cdr.detectChanges()})}ngOnDestroy(){this.scrollEl.removeEventListener("scroll",this.scrollListener)}onResize(){this.updateScrollButtons(),this.cdr.detectChanges()}updateScrollButtons(){if(!this.scrollEl)return;let{scrollLeft:t,scrollWidth:e,clientWidth:r}=this.scrollEl;this.showLeft=t>0,this.showRight=t+r<e}scrollLeft(){this.scrollEl.scrollBy({left:-this.scrollEl.clientWidth*.8,behavior:"smooth"})}scrollRight(){this.scrollEl.scrollBy({left:this.scrollEl.clientWidth*.8,behavior:"smooth"})}onKeyDown(t){t.key==="ArrowLeft"?(this.scrollLeft(),t.preventDefault()):t.key==="ArrowRight"&&(this.scrollRight(),t.preventDefault())}static \u0275fac=function(e){return new(e||n)(g(K))};static \u0275cmp=m({type:n,selectors:[["app-horizontal-strip"]],viewQuery:function(e,r){if(e&1&&j(rt,7),e&2){let i;N(i=U())&&(r.scrollContainer=i.first)}},hostBindings:function(e,r){e&1&&p("resize",function(){return r.onResize()},R)("keydown",function(v){return r.onKeyDown(v)})},inputs:{title:"title",headerUrl:"headerUrl",items:"items",loading:"loading",isFirstStrip:"isFirstStrip"},features:[H],decls:11,vars:7,consts:[["scrollContainer",""],[1,"mb-4","px-3","strip-wrapper"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"h5","mb-0"],[1,"scroll-container-wrapper"],["class","scroll-btn left","aria-label","Scroll left",3,"click",4,"ngIf"],["tabindex","0",1,"row","flex-nowrap","gx-2","overflow-auto","scroll-container",3,"keydown"],[1,"col-6","col-sm-4","col-md-3","col-lg-2","flex-shrink-0"],["class","scroll-btn right","aria-label","Scroll right",3,"click",4,"ngIf"],["aria-label","Scroll left",1,"scroll-btn","left",3,"click"],[3,"item","loading","priority"],["aria-label","Scroll right",1,"scroll-btn","right",3,"click"]],template:function(e,r){if(e&1){let i=M();a(0,"div",1)(1,"div",2)(2,"h2",3),_(3),o()(),a(4,"div",4),k(5,ot,2,0,"button",5),a(6,"div",6,0),p("keydown",function(Z){return u(i),w(r.onKeyDown(Z))}),f(8,at,2,3,"div",7,it),o(),k(10,lt,2,0,"button",8),o()()}e&2&&(l(3),A(r.title),l(),y("show-left",r.showLeft)("show-right",r.showRight),l(),s("ngIf",r.showLeft),l(3),h(r.items),l(2),s("ngIf",r.showRight))},dependencies:[C,G,S],styles:['.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]{position:relative;--gutter: .5rem}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:before, .strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;pointer-events:none;z-index:1;opacity:0;transition:opacity .3s ease}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:before{left:0;width:calc((100% - var(--gutter)) / 4);background:linear-gradient(to right,rgba(0,0,0,.8),transparent)}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:after{right:0;width:calc((100% - var(--gutter)) / 4);background:linear-gradient(to left,rgba(0,0,0,.8),transparent)}@media (min-width: 576px){.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:before, .strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:after{width:calc((100% - 2 * var(--gutter)) / 6)}}@media (min-width: 768px){.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:before, .strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:after{width:calc((100% - 3 * var(--gutter)) / 8)}}@media (min-width: 992px){.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:before, .strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]:after{width:calc((100% - 5 * var(--gutter)) / 12)}}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper.show-left[_ngcontent-%COMP%]:before{opacity:1}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper.show-right[_ngcontent-%COMP%]:after{opacity:1}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{overflow-x:auto;scrollbar-width:none;-ms-overflow-style:none;margin-right:0;margin-left:0;padding-right:calc((100% - var(--gutter)) / 4)}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media (min-width: 576px){.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{padding-right:calc((100% - 2 * var(--gutter)) / 6)}}@media (min-width: 768px){.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{padding-right:calc((100% - 3 * var(--gutter)) / 8)}}@media (min-width: 992px){.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]   .scroll-container[_ngcontent-%COMP%]{padding-right:calc((100% - 5 * var(--gutter)) / 12)}}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]   .scroll-btn[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;width:80px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;color:#fff;font-size:4.5rem;cursor:pointer;opacity:0;transition:opacity .3s;z-index:2}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]   .scroll-btn.left[_ngcontent-%COMP%]{left:0;background-image:linear-gradient(to right,rgba(0,0,0,.8),transparent)}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper[_ngcontent-%COMP%]   .scroll-btn.right[_ngcontent-%COMP%]{right:0;background-image:linear-gradient(to left,rgba(0,0,0,.8),transparent)}.strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper.show-left[_ngcontent-%COMP%]:hover   .scroll-btn.left[_ngcontent-%COMP%], .strip-wrapper[_ngcontent-%COMP%]   .scroll-container-wrapper.show-right[_ngcontent-%COMP%]:hover   .scroll-btn.right[_ngcontent-%COMP%]{opacity:1}']})};var st=()=>[0,1,2],ct=()=>[0,1,2,3,4,5],pt=(n,t)=>t.id||n;function dt(n,t){n&1&&(a(0,"div",2)(1,"div",3),c(2,"ngx-skeleton-loader",4),o()())}function gt(n,t){n&1&&(a(0,"div",0)(1,"h2",1),_(2,"..."),o(),f(3,dt,3,0,"div",2,F),o()),n&2&&(l(3),h(I(0,ct)))}function mt(n,t){n&1&&f(0,gt,5,1,"div",0,F),n&2&&h(I(0,st))}function ft(n,t){if(n&1&&c(0,"app-horizontal-strip",5),n&2){let e=t.$implicit,r=t.$index,i=d(2);s("title",e.header)("headerUrl",e.headerUrl)("items",e.data)("loading",i.loading)("isFirstStrip",r===0)}}function ht(n,t){if(n&1&&(a(0,"div"),f(1,ft,1,5,"app-horizontal-strip",5,pt),o()),n&2){let e=d();l(),h(e.frontPageStrips)}}var X=class n{constructor(t){this.data=t}loading=!0;frontPageStrips=[];ngOnInit(){this.data.fetchFrontPage().subscribe({next:t=>{let e=t.data?.category?.frontPage??[];this.frontPageStrips=e.filter(r=>r.highTimeline),this.loading=!1},error:t=>{console.error("Failed to fetch front page:",t),this.loading=!1}})}static \u0275fac=function(e){return new(e||n)(g(Y))};static \u0275cmp=m({type:n,selectors:[["app-frontpage"]],decls:2,vars:1,consts:[[1,"row","p-0","m-0"],[1,"h5","ps-3"],[1,"col-12","col-sm-6","col-md-4","col-lg-2","ps-3","pb-3","m-0"],[1,"img-wrapper","p-0","m-0"],["appearance","square","animation","pulse-dark"],[3,"title","headerUrl","items","loading","isFirstStrip"]],template:function(e,r){e&1&&b(0,mt,2,1)(1,ht,3,0,"div"),e&2&&O(r.loading?0:1)},dependencies:[C,x,Q,q],styles:[".img-wrapper[_ngcontent-%COMP%]{position:relative;width:93%;aspect-ratio:2/3;overflow:hidden}"]})};export{X as Frontpage};
